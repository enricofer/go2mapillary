<!doctype html>
<html>
  <head>
    <meta charset=utf-8>
    <title>mapillary-js preview</title>
    <link rel="stylesheet" href="https://unpkg.com/mapillary-js@0.0.3/dist/mapillary-js.css" />
    <link rel="stylesheet" href="https://unpkg.com/mapillary-js@0.0.3/dist/SimpleNavUI.css">
  </head>
    <body style="margin:0px;">
    <div id="mly"></div>
    <script src="https://unpkg.com/mapillary-js@0.0.3/dist/mapillary-js.min.js"></script>
    <script>
        
    
    function gup(name)
    {
      name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
      var regexS = "[\\?&]"+name+"=([^&#]*)";
      var regex = new RegExp( regexS );
      var results = regex.exec( window.location.href );
      if( results == null )
        return "";
      else
        return results[1];
    };
    
    var key_param = gup('key');
    
    if (key_param == '') {
        key_param = 'lGR_tpysmbwfQCRhgX2etw'
    }
    
    console.log(key_param);
    
    var mly = new Mapillary
      .Viewer('mly', // container id
              'MkJKbDA0bnZuZlcxeTJHTmFqN3g1dzo1YTM0NjRkM2EyZGU5MzBh', // your Client ID
              {
                key: key_param,  // photoId at which the viewer initializes
                uis: ['gl', 'simplenav', 'simplecache', 'keyboard'] // UIs upon which the viewer will depend on
              });
              
              
    </script>
  </body>
</html>
